<mat-card class="cardWithShadow">
  <mat-card-content class="p-24">
    <h3 class="f-s-18 f-w-600 mb-16">Liste des réponses</h3>
    <div class="table-responsive">
      <table mat-table [dataSource]="dataSource" class="w-100">

        <!-- Date de soumission -->
        <ng-container matColumnDef="date">
          <th mat-header-cell *matHeaderCellDef>Date de soumission</th>
          <td mat-cell *matCellDef="let row">{{ row.date }}</td>
        </ng-container>

        <!-- Utilisateur -->
        <ng-container matColumnDef="user">
          <th mat-header-cell *matHeaderCellDef>Utilisateur</th>
          <td mat-cell *matCellDef="let row">{{ row.user }}</td>
        </ng-container>

        <!-- Titre du formulaire -->
        <ng-container matColumnDef="title">
          <th mat-header-cell *matHeaderCellDef>Titre du formulaire</th>
          <td mat-cell *matCellDef="let row">{{ row.title }}</td>
        </ng-container>

        <!-- Actions -->
        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef>Actions</th>
          <td mat-cell *matCellDef="let row" class="d-flex gap-2">
            <!-- Voir la réponse -->
            <button
              mat-icon-button
              [routerLink]="['/apps/reponses', row.formId, row.id]"
              matTooltip="Voir">
              <i-tabler name="eye" class="icon-18"></i-tabler>
            </button>
            <!-- Ajouter un menu de téléchargement -->
<button mat-icon-button [matMenuTriggerFor]="downloadMenu" matTooltip="Télécharger">
  <i-tabler name="download" class="icon-18"></i-tabler>
</button>
<mat-menu #downloadMenu="matMenu">
  <button mat-menu-item (click)="downloadPdf(row.formId, row.id)">
    <mat-icon>picture_as_pdf</mat-icon>
    <span>PDF</span>
  </button>
  <button mat-menu-item (click)="exportExcel(row.formId, row.id)">
    <mat-icon>grid_on</mat-icon>
    <span>Excel</span>
  </button>
</mat-menu>
            <!-- Supprimer la réponse (désactivé pour l’instant) -->
            <button mat-icon-button matTooltip="Supprimer" disabled>
              <i-tabler name="trash" class="icon-18"></i-tabler>
            </button>
          </td>
        </ng-container>

        <!-- Header et lignes -->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row        *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </div>
  </mat-card-content>
</mat-card>
